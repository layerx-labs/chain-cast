// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}
generator pothos {
  provider = "prisma-pothos-types"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ContractCastType {
  BEPRO_NETWORK_V2
  BEPRO_FACTORY
  BEPRO_REGISTRY
  BEPRO_POP
  ERC20
  ERC721
  ERC1155
}

model ContractCast {
   id                     String  @id @default(cuid()) @db.VarChar(30)  
   type                   ContractCastType
   address                String
   chainId                Int
   blockNumber            Int @default(0)
   transactionIndex                Int @default(0)
   program                String
   createdAt              DateTime  @default(now())
   secrets                Secret[]
   @@unique([chainId, address])
}

model Secret {
   id                     String    @id @default(cuid()) @db.VarChar(30)  
   name                   String    
   value                  String 
   salt                   String    
   contractCastId         String  
   contractCast           ContractCast  @relation(fields: [contractCastId], references: [id])     
   createdAt              DateTime  @default(now())
   updatedAt              DateTime  @updatedAt
   @@unique([name, contractCastId])
}


