// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}
generator pothos {
  provider = "prisma-pothos-types"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ChainCastType {
  BEPRO_NETWORK_V2
  BEPRO_FACTORY
  BEPRO_REGISTRY
  BEPRO_POP
}

model ChainCast {
   id                     String  @id @default(cuid()) @db.VarChar(30)  
   type                   ChainCastType
   address                String
   chainId                Int
   blockNumber            Int @default(0)
   events                 ChainCastEvent[]
   createdAt              DateTime  @default(now())
}

model ChainCastEvent {
  id                        String               @id @default(cuid()) @db.VarChar(30)  
  streamId                  String               @db.VarChar(30)
  stream                    ChainCast     @relation(fields: [streamId], references: [id])    
  event                     String  
  eventId                   String
  address                   String
  blockHash                 String
  blockNumber               Int
  transactionHash           String
  transactionIndex          Int?
  args                      Json
  logIndex                  Int
  createdAt                 DateTime  @default(now())
}